---
phase: 04-native-macos-ui
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - frontend/src/lib/components/ui/button/index.js
  - frontend/src/lib/components/ui/button/button.svelte
  - frontend/src/lib/components/ui/card/index.js
  - frontend/src/lib/components/ui/card/card.svelte
  - frontend/src/lib/utils.js
autonomous: true

must_haves:
  truths:
    - "Button component renders with macOS-style styling"
    - "Card component provides consistent container styling"
    - "cn() utility merges Tailwind classes correctly"
  artifacts:
    - path: "frontend/src/lib/utils.js"
      provides: "cn() class merge utility"
      contains: "clsx"
    - path: "frontend/src/lib/components/ui/button/button.svelte"
      provides: "Reusable Button component with variants"
      contains: "$props()"
    - path: "frontend/src/lib/components/ui/card/card.svelte"
      provides: "Reusable Card container component"
      contains: "$props()"
  key_links:
    - from: "frontend/src/lib/components/ui/button/button.svelte"
      to: "frontend/src/lib/utils.js"
      via: "cn() import for class merging"
      pattern: "import.*cn.*from"
---

<objective>
Create base UI components following shadcn-svelte patterns with macOS styling

Purpose: Establish reusable, accessible UI primitives that follow Apple HIG. These components will be used across all feature components.

Output:
- cn() utility for class merging
- Button component with primary, secondary, ghost variants
- Card component for content containers
- All components use Svelte 5 runes ($props)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-native-macos-ui/04-RESEARCH.md
@.planning/phases/04-native-macos-ui/04-01-SUMMARY.md

@frontend/package.json
@frontend/tailwind.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create utils and directory structure</name>
  <files>frontend/src/lib/utils.js, frontend/src/lib/components/ui/</files>
  <action>
1. Create the directory structure:
```bash
mkdir -p frontend/src/lib/components/ui/button
mkdir -p frontend/src/lib/components/ui/card
```

2. Create frontend/src/lib/utils.js with cn() utility:
```javascript
import { clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

/**
 * Merge Tailwind CSS classes with proper precedence
 * @param {...(string|undefined|null|false)} inputs - Class names to merge
 * @returns {string} Merged class string
 */
export function cn(...inputs) {
  return twMerge(clsx(inputs));
}
```

This utility is essential for:
- Combining component default classes with user-provided classes
- Resolving Tailwind class conflicts (e.g., "p-4" + "p-2" = "p-2")
- Handling conditional classes cleanly
  </action>
  <verify>
Directories exist: frontend/src/lib/components/ui/button, frontend/src/lib/components/ui/card.
File exists: frontend/src/lib/utils.js.
  </verify>
  <done>
Directory structure created.
cn() utility exports from utils.js.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Button component with macOS variants</name>
  <files>frontend/src/lib/components/ui/button/button.svelte, frontend/src/lib/components/ui/button/index.js</files>
  <action>
1. Create frontend/src/lib/components/ui/button/button.svelte:
```svelte
<script>
  import { cn } from '$lib/utils.js';

  /**
   * @typedef {'default' | 'secondary' | 'ghost' | 'destructive'} Variant
   * @typedef {'default' | 'sm' | 'lg' | 'icon'} Size
   */

  let {
    variant = 'default',
    size = 'default',
    class: className = '',
    disabled = false,
    type = 'button',
    onclick,
    children,
    ...restProps
  } = $props();

  const baseClasses = 'inline-flex items-center justify-center whitespace-nowrap rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-macos-blue focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50';

  const variantClasses = {
    default: 'bg-macos-blue text-white hover:bg-blue-600 dark:hover:bg-blue-500',
    secondary: 'bg-white/10 text-slate-100 border border-white/20 hover:bg-white/15 dark:bg-slate-800 dark:hover:bg-slate-700',
    ghost: 'hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-100',
    destructive: 'bg-macos-red text-white hover:bg-red-600',
  };

  const sizeClasses = {
    default: 'h-9 px-4 py-2 text-sm',
    sm: 'h-8 px-3 text-xs',
    lg: 'h-10 px-6 text-base',
    icon: 'h-9 w-9',
  };

  const classes = $derived(cn(
    baseClasses,
    variantClasses[variant],
    sizeClasses[size],
    className
  ));
</script>

<button
  {type}
  {disabled}
  class={classes}
  {onclick}
  {...restProps}
>
  {@render children?.()}
</button>
```

2. Create frontend/src/lib/components/ui/button/index.js:
```javascript
import Button from './button.svelte';

export { Button };
export default Button;
```

Note: Uses Svelte 5 patterns:
- $props() for props with defaults
- $derived for computed class string
- {@render children?.()} for slot content (snippet pattern)
- onclick instead of on:click
  </action>
  <verify>
Files exist: frontend/src/lib/components/ui/button/button.svelte, frontend/src/lib/components/ui/button/index.js.
button.svelte contains "$props()" and "$derived".
  </verify>
  <done>
Button component created with 4 variants (default, secondary, ghost, destructive).
Sizes: default, sm, lg, icon.
Uses Svelte 5 runes and macOS color tokens.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Card component for content containers</name>
  <files>frontend/src/lib/components/ui/card/card.svelte, frontend/src/lib/components/ui/card/index.js</files>
  <action>
1. Create frontend/src/lib/components/ui/card/card.svelte:
```svelte
<script>
  import { cn } from '$lib/utils.js';

  let {
    class: className = '',
    children,
    ...restProps
  } = $props();

  const classes = $derived(cn(
    'rounded-xl border border-white/10 bg-white/5 p-6 shadow-sm dark:bg-slate-800/50 dark:border-slate-700/50',
    className
  ));
</script>

<div class={classes} {...restProps}>
  {@render children?.()}
</div>
```

2. Create CardHeader component - frontend/src/lib/components/ui/card/card-header.svelte:
```svelte
<script>
  import { cn } from '$lib/utils.js';

  let {
    class: className = '',
    children,
    ...restProps
  } = $props();

  const classes = $derived(cn('flex flex-col space-y-1.5 pb-4', className));
</script>

<div class={classes} {...restProps}>
  {@render children?.()}
</div>
```

3. Create CardTitle component - frontend/src/lib/components/ui/card/card-title.svelte:
```svelte
<script>
  import { cn } from '$lib/utils.js';

  let {
    class: className = '',
    children,
    ...restProps
  } = $props();

  const classes = $derived(cn('text-lg font-semibold leading-none tracking-tight', className));
</script>

<h3 class={classes} {...restProps}>
  {@render children?.()}
</h3>
```

4. Create CardContent component - frontend/src/lib/components/ui/card/card-content.svelte:
```svelte
<script>
  import { cn } from '$lib/utils.js';

  let {
    class: className = '',
    children,
    ...restProps
  } = $props();

  const classes = $derived(cn('', className));
</script>

<div class={classes} {...restProps}>
  {@render children?.()}
</div>
```

5. Create frontend/src/lib/components/ui/card/index.js:
```javascript
import Card from './card.svelte';
import CardHeader from './card-header.svelte';
import CardTitle from './card-title.svelte';
import CardContent from './card-content.svelte';

export { Card, CardHeader, CardTitle, CardContent };
export default Card;
```
  </action>
  <verify>
Files exist in frontend/src/lib/components/ui/card/: card.svelte, card-header.svelte, card-title.svelte, card-content.svelte, index.js.
All components use $props() and $derived.
  </verify>
  <done>
Card components created: Card, CardHeader, CardTitle, CardContent.
All use macOS-style semi-transparent backgrounds.
Export barrel file ready for imports.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Directory structure exists: frontend/src/lib/components/ui/{button,card}/
2. utils.js exports cn() function
3. Button component has 4 variants with macOS styling
4. Card components export Card, CardHeader, CardTitle, CardContent
5. All components use Svelte 5 $props() and $derived patterns
</verification>

<success_criteria>
- cn() utility works for class merging
- Button component renders with all variants
- Card component renders with semi-transparent background
- All components use Svelte 5 runes (no export let, no $:)
- macOS colors (macos-blue, macos-red) are used
</success_criteria>

<output>
After completion, create `.planning/phases/04-native-macos-ui/04-02-SUMMARY.md`
</output>
