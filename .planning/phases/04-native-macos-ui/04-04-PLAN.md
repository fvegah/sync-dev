---
phase: 04-native-macos-ui
plan: 04
type: execute
wave: 4
depends_on: ["04-03"]
files_modified:
  - frontend/src/lib/PeerList.svelte
  - frontend/src/lib/FolderPairs.svelte
autonomous: true

must_haves:
  truths:
    - "PeerList displays devices with Lucide icons"
    - "FolderPairs shows folder configurations with macOS styling"
    - "Both components use Svelte 5 runes"
    - "Status colors use macOS color tokens"
  artifacts:
    - path: "frontend/src/lib/PeerList.svelte"
      provides: "Device list with pairing functionality"
      contains: "$state("
    - path: "frontend/src/lib/FolderPairs.svelte"
      provides: "Folder pair management UI"
      contains: "$derived("
  key_links:
    - from: "frontend/src/lib/PeerList.svelte"
      to: "lucide-svelte"
      via: "Icon imports"
      pattern: "import.*from.*lucide-svelte"
    - from: "frontend/src/lib/FolderPairs.svelte"
      to: "frontend/src/lib/components/ui/button/index.js"
      via: "Button component usage"
      pattern: "Button"
---

<objective>
Migrate PeerList and FolderPairs components to Svelte 5 with macOS styling

Purpose: These are the primary data display components. Migrating them completes the core feature UI with macOS-native appearance.

Output:
- PeerList.svelte with Svelte 5 runes, Lucide icons, macOS colors
- FolderPairs.svelte with Svelte 5 runes, macOS styling
- Both use Tailwind for all styling (no <style> blocks)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-native-macos-ui/04-RESEARCH.md
@.planning/phases/04-native-macos-ui/04-03-SUMMARY.md

@frontend/src/lib/PeerList.svelte
@frontend/src/lib/FolderPairs.svelte
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate PeerList.svelte to Svelte 5</name>
  <files>frontend/src/lib/PeerList.svelte</files>
  <action>
Rewrite frontend/src/lib/PeerList.svelte with Svelte 5 patterns and macOS styling:

```svelte
<script>
    import { onMount, onDestroy } from 'svelte';
    import { Monitor, RefreshCw, X, Search } from 'lucide-svelte';
    import { peers, pairingState, showModal } from '../stores/app.js';
    import { GetPeers, GeneratePairingCode, RequestPairing, UnpairPeer, RefreshPeers } from '../../wailsjs/go/main/App.js';
    import { EventsOn, EventsOff } from '../../wailsjs/runtime/runtime.js';

    let myPairingCode = $state('');
    let searchFilter = $state('');
    let isScanning = $state(false);
    let scanTimeout = $state(null);

    onMount(async () => {
        await loadPeers();
        EventsOn('peers:changed', loadPeers);
        startScan();
    });

    onDestroy(() => {
        EventsOff('peers:changed');
        if (scanTimeout) clearTimeout(scanTimeout);
    });

    async function loadPeers() {
        const result = await GetPeers();
        peers.set(result || []);
    }

    async function startScan() {
        isScanning = true;
        await loadPeers();
        scanTimeout = setTimeout(() => {
            isScanning = false;
        }, 15000);
    }

    async function refreshDevices() {
        if (scanTimeout) clearTimeout(scanTimeout);
        isScanning = true;
        try {
            await RefreshPeers();
        } catch (e) {
            // RefreshPeers may not exist
        }
        await loadPeers();
        scanTimeout = setTimeout(() => {
            isScanning = false;
        }, 15000);
    }

    async function generateCode() {
        myPairingCode = await GeneratePairingCode();
    }

    function startPairing(peer) {
        showModal('pairing', peer);
    }

    async function unpair(peer) {
        if (confirm(`Unpair from ${peer.name}? This will remove all folder pairs with this device.`)) {
            await UnpairPeer(peer.id);
            await loadPeers();
        }
    }

    function getStatusColor(status) {
        switch (status) {
            case 'online': return 'bg-macos-green';
            case 'syncing': return 'bg-macos-blue';
            case 'pairing': return 'bg-macos-orange';
            default: return 'bg-slate-500';
        }
    }

    function getStatusText(status) {
        switch (status) {
            case 'online': return 'Online';
            case 'syncing': return 'Syncing';
            case 'pairing': return 'Pairing';
            default: return 'Offline';
        }
    }

    // Derived: filtered and sorted peers
    const filteredPeers = $derived.by(() => {
        return $peers
            .filter(p => {
                if (!searchFilter) return true;
                const search = searchFilter.toLowerCase();
                return p.name.toLowerCase().includes(search) ||
                       p.host.toLowerCase().includes(search);
            })
            .sort((a, b) => {
                if (a.paired && !b.paired) return -1;
                if (!a.paired && b.paired) return 1;
                if (a.status === 'online' && b.status !== 'online') return -1;
                if (a.status !== 'online' && b.status === 'online') return 1;
                return a.name.localeCompare(b.name);
            });
    });

    const pairedPeers = $derived(filteredPeers.filter(p => p.paired));
    const otherPeers = $derived(filteredPeers.filter(p => !p.paired));
</script>

<div class="h-full flex flex-col p-5">
    <!-- Header -->
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-semibold">Devices</h2>
        <div class="flex gap-2">
            <button
                class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-100 bg-white/10 border border-white/20 rounded-lg hover:bg-white/15 transition-colors disabled:opacity-50"
                onclick={refreshDevices}
                disabled={isScanning}
            >
                <RefreshCw size={16} class={isScanning ? 'animate-spin' : ''} />
                {isScanning ? 'Scanning...' : 'Refresh'}
            </button>
            <button
                class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-100 bg-white/10 border border-white/20 rounded-lg hover:bg-white/15 transition-colors"
                onclick={generateCode}
            >
                Generate Pairing Code
            </button>
        </div>
    </div>

    <!-- Search bar -->
    <div class="flex items-center gap-3 bg-white/5 border border-white/10 rounded-lg px-4 py-2.5 mb-4">
        <Search size={18} class="text-slate-500 flex-shrink-0" />
        <input
            type="text"
            placeholder="Filter devices by name or IP..."
            bind:value={searchFilter}
            class="flex-1 bg-transparent border-none text-sm text-slate-100 placeholder-slate-500 focus:outline-none"
        />
        {#if searchFilter}
            <button class="text-slate-500 hover:text-slate-300" onclick={() => searchFilter = ''}>
                <X size={16} />
            </button>
        {/if}
    </div>

    <!-- Pairing code display -->
    {#if myPairingCode}
        <div class="bg-macos-blue/10 border border-macos-blue/30 rounded-lg p-4 mb-4 text-center">
            <p class="text-slate-400 text-sm mb-3">Share this code with another device to pair:</p>
            <div class="text-3xl font-mono font-bold tracking-[0.5em] text-macos-blue bg-black/20 rounded-md py-3">
                {myPairingCode}
            </div>
            <button class="text-sm text-slate-500 hover:text-slate-300 mt-3" onclick={() => myPairingCode = ''}>
                Dismiss
            </button>
        </div>
    {/if}

    <!-- Peer list -->
    <div class="flex-1 overflow-y-auto">
        {#if filteredPeers.length === 0}
            <div class="text-center py-10 text-slate-500">
                {#if searchFilter}
                    <p>No devices match your search.</p>
                {:else if isScanning}
                    <p>Scanning for devices...</p>
                    <p class="text-sm mt-2">Looking for other Macs running SyncDev on your network.</p>
                {:else}
                    <p>No devices found on your network.</p>
                    <p class="text-sm mt-2">Make sure SyncDev is running on other Macs in your local network.</p>
                {/if}
            </div>
        {:else}
            {#if pairedPeers.length > 0}
                <div class="flex items-center gap-2 mb-3 mt-2">
                    <span class="text-xs font-semibold uppercase tracking-wider text-slate-500">Paired Devices</span>
                    <span class="text-xs bg-white/10 text-slate-400 px-2 py-0.5 rounded-full">{pairedPeers.length}</span>
                </div>
                {#each pairedPeers as peer}
                    <div class="flex items-center gap-4 p-4 bg-macos-green/5 border border-macos-green/20 rounded-lg mb-2">
                        <div class="w-10 h-10 flex items-center justify-center bg-macos-green/20 rounded-lg">
                            <Monitor size={22} class="text-macos-green" />
                        </div>
                        <div class="flex-1">
                            <span class="font-medium text-slate-100">{peer.name}</span>
                            <span class="block text-xs text-slate-500 font-mono">{peer.host}:{peer.port}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="w-2 h-2 rounded-full {getStatusColor(peer.status)}"></span>
                            <span class="text-sm text-slate-400">{getStatusText(peer.status)}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs px-2 py-1 bg-macos-green/20 text-macos-green rounded">Paired</span>
                            <button
                                class="p-1.5 rounded hover:bg-white/10 text-slate-500 hover:text-macos-red transition-colors"
                                onclick={() => unpair(peer)}
                                title="Unpair"
                            >
                                <X size={16} />
                            </button>
                        </div>
                    </div>
                {/each}
            {/if}

            {#if otherPeers.length > 0}
                <div class="flex items-center gap-2 mb-3 mt-4">
                    <span class="text-xs font-semibold uppercase tracking-wider text-slate-500">Available Devices</span>
                    <span class="text-xs bg-white/10 text-slate-400 px-2 py-0.5 rounded-full">{otherPeers.length}</span>
                </div>
                {#each otherPeers as peer}
                    <div class="flex items-center gap-4 p-4 bg-white/5 border border-white/10 rounded-lg mb-2 hover:bg-white/8 transition-colors">
                        <div class="w-10 h-10 flex items-center justify-center bg-white/10 rounded-lg">
                            <Monitor size={22} class="text-slate-400" />
                        </div>
                        <div class="flex-1">
                            <span class="font-medium text-slate-100">{peer.name}</span>
                            <span class="block text-xs text-slate-500 font-mono">{peer.host}:{peer.port}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="w-2 h-2 rounded-full {getStatusColor(peer.status)}"></span>
                            <span class="text-sm text-slate-400">{getStatusText(peer.status)}</span>
                        </div>
                        {#if peer.status === 'online'}
                            <button
                                class="px-3 py-1.5 text-sm font-medium text-white bg-macos-blue rounded-lg hover:bg-blue-600 transition-colors"
                                onclick={() => startPairing(peer)}
                            >
                                Pair
                            </button>
                        {/if}
                    </div>
                {/each}
            {/if}
        {/if}
    </div>
</div>
```

Key migration changes:
- `let x = $state(value)` replaces `let x = value` for reactive state
- `$derived.by(() => {...})` replaces `$: x = expression` for complex derivations
- `$derived(expression)` for simple derivations
- `onclick={fn}` replaces `on:click={fn}`
- All styles are Tailwind classes, no <style> block
- Lucide icons replace inline SVGs
- macOS color tokens (macos-green, macos-blue, macos-red) for status
  </action>
  <verify>
File frontend/src/lib/PeerList.svelte exists with new content.
Contains: "$state(", "$derived", "onclick=", "lucide-svelte".
Does NOT contain: "$:", "on:click=", "<style>".
  </verify>
  <done>
PeerList.svelte migrated to Svelte 5 runes.
Uses Lucide icons (Monitor, RefreshCw, X, Search).
macOS color tokens for status indicators.
All Tailwind styling, no <style> block.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate FolderPairs.svelte to Svelte 5</name>
  <files>frontend/src/lib/FolderPairs.svelte</files>
  <action>
Rewrite frontend/src/lib/FolderPairs.svelte with Svelte 5 patterns and macOS styling:

```svelte
<script>
    import { onMount } from 'svelte';
    import { Monitor, Folder, RefreshCw, Trash2, Search, ArrowLeftRight, Check, AlertCircle, ChevronUp, ChevronDown, X } from 'lucide-svelte';
    import { folderPairs, peers, showModal } from '../stores/app.js';
    import {
        GetFolderPairs,
        GetPeers,
        AddFolderPair,
        RemoveFolderPair,
        UpdateFolderPair,
        SelectFolder,
        SyncFolderPair,
        AnalyzeFolderPair
    } from '../../wailsjs/go/main/App.js';

    let showAddForm = $state(false);
    let selectedPeerId = $state('');
    let localPath = $state('');
    let remotePath = $state('');
    let analyzingPairId = $state(null);
    let showPreview = $state(false);
    let previewData = $state(null);

    onMount(async () => {
        await loadData();
    });

    async function loadData() {
        const [pairs, peerList] = await Promise.all([
            GetFolderPairs(),
            GetPeers()
        ]);
        folderPairs.set(pairs || []);
        peers.set(peerList || []);
    }

    const pairedPeers = $derived($peers.filter(p => p.paired));

    function getPeerName(peerId) {
        const peer = $peers.find(p => p.id === peerId);
        return peer ? peer.name : 'Unknown';
    }

    async function browseLocalFolder() {
        const path = await SelectFolder();
        if (path) {
            localPath = path;
        }
    }

    async function addPair() {
        if (!selectedPeerId || !localPath || !remotePath) {
            alert('Please fill in all fields');
            return;
        }

        try {
            await AddFolderPair(selectedPeerId, localPath, remotePath);
            showAddForm = false;
            selectedPeerId = '';
            localPath = '';
            remotePath = '';
            await loadData();
        } catch (err) {
            alert('Failed to add folder pair: ' + err);
        }
    }

    async function removePair(id) {
        if (confirm('Remove this folder pair? Files will not be deleted.')) {
            await RemoveFolderPair(id);
            await loadData();
        }
    }

    async function toggleEnabled(pair) {
        await UpdateFolderPair(pair.id, !pair.enabled, pair.exclusions || []);
        await loadData();
    }

    async function syncNow(pair) {
        try {
            await SyncFolderPair(pair.id);
        } catch (err) {
            alert('Sync failed: ' + err);
        }
    }

    function formatDate(dateStr) {
        if (!dateStr) return 'Never';
        const date = new Date(dateStr);
        return date.toLocaleString();
    }

    function formatBytes(bytes) {
        if (!bytes) return '0 B';
        const units = ['B', 'KB', 'MB', 'GB'];
        let size = bytes;
        let unitIndex = 0;
        while (size >= 1024 && unitIndex < units.length - 1) {
            size /= 1024;
            unitIndex++;
        }
        return `${size.toFixed(1)} ${units[unitIndex]}`;
    }

    async function analyzePair(pair) {
        analyzingPairId = pair.id;
        showPreview = true;
        previewData = null;

        try {
            previewData = await AnalyzeFolderPair(pair.id);
        } catch (err) {
            console.error('Analysis failed:', err);
            previewData = { error: err.toString() };
        }
        analyzingPairId = null;
    }

    async function syncFromPreview() {
        if (!previewData?.folderPairId) return;
        const pairId = previewData.folderPairId;
        closePreview();
        try {
            await SyncFolderPair(pairId);
        } catch (err) {
            alert('Sync failed: ' + err);
        }
    }

    function closePreview() {
        showPreview = false;
        previewData = null;
    }
</script>

<div class="h-full flex flex-col p-5">
    <!-- Header -->
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-semibold">Folder Pairs</h2>
        {#if pairedPeers.length > 0}
            <button
                class="px-4 py-2 text-sm font-medium text-white bg-macos-blue rounded-lg hover:bg-blue-600 transition-colors"
                onclick={() => showAddForm = !showAddForm}
            >
                {showAddForm ? 'Cancel' : 'Add Folder Pair'}
            </button>
        {/if}
    </div>

    <!-- Add form -->
    {#if showAddForm}
        <div class="bg-white/5 border border-white/10 rounded-xl p-5 mb-4">
            <div class="mb-4">
                <label class="block text-sm font-medium text-slate-300 mb-2">Paired Device</label>
                <select
                    bind:value={selectedPeerId}
                    class="w-full px-3 py-2.5 bg-black/30 border border-white/10 rounded-lg text-slate-100 text-sm focus:outline-none focus:border-macos-blue"
                >
                    <option value="">Select a device...</option>
                    {#each pairedPeers as peer}
                        <option value={peer.id}>{peer.name}</option>
                    {/each}
                </select>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium text-slate-300 mb-2">Local Folder</label>
                <div class="flex gap-2">
                    <input
                        type="text"
                        bind:value={localPath}
                        placeholder="/Users/you/Documents/Projects"
                        class="flex-1 px-3 py-2.5 bg-black/30 border border-white/10 rounded-lg text-slate-100 text-sm focus:outline-none focus:border-macos-blue"
                    />
                    <button
                        class="px-4 py-2 text-sm font-medium text-slate-100 bg-white/10 border border-white/20 rounded-lg hover:bg-white/15 transition-colors"
                        onclick={browseLocalFolder}
                    >
                        Browse
                    </button>
                </div>
            </div>

            <div class="mb-5">
                <label class="block text-sm font-medium text-slate-300 mb-2">Remote Folder (on paired device)</label>
                <input
                    type="text"
                    bind:value={remotePath}
                    placeholder="/Users/other/Documents/Projects"
                    class="w-full px-3 py-2.5 bg-black/30 border border-white/10 rounded-lg text-slate-100 text-sm focus:outline-none focus:border-macos-blue"
                />
            </div>

            <button
                class="px-4 py-2 text-sm font-medium text-white bg-macos-blue rounded-lg hover:bg-blue-600 transition-colors"
                onclick={addPair}
            >
                Add Folder Pair
            </button>
        </div>
    {/if}

    <!-- Folder pairs list -->
    <div class="flex-1 overflow-y-auto">
        {#if $folderPairs.length === 0}
            <div class="text-center py-10 text-slate-500">
                {#if pairedPeers.length === 0}
                    <p>No paired devices yet.</p>
                    <p class="text-sm mt-2">Go to the Devices tab to pair with another Mac first.</p>
                {:else}
                    <p>No folder pairs configured.</p>
                    <p class="text-sm mt-2">Click "Add Folder Pair" to start syncing folders.</p>
                {/if}
            </div>
        {:else}
            {#each $folderPairs as pair}
                <div class="bg-white/5 border border-white/10 rounded-xl p-4 mb-3 {!pair.enabled ? 'opacity-50' : ''}">
                    <div class="flex items-center gap-3 mb-3">
                        <input
                            type="checkbox"
                            checked={pair.enabled}
                            onchange={() => toggleEnabled(pair)}
                            class="w-5 h-5 rounded border-white/20 bg-black/30 text-macos-blue focus:ring-macos-blue"
                        />
                        <div class="flex items-center gap-2 flex-1">
                            <Monitor size={18} class="text-slate-500" />
                            <span class="font-medium">{getPeerName(pair.peerId)}</span>
                        </div>
                        <div class="flex gap-1">
                            <button
                                class="p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-slate-100 transition-colors disabled:opacity-50"
                                onclick={() => analyzePair(pair)}
                                title="Preview changes"
                                disabled={!pair.enabled || analyzingPairId === pair.id}
                            >
                                <Search size={18} />
                            </button>
                            <button
                                class="p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-slate-100 transition-colors disabled:opacity-50"
                                onclick={() => syncNow(pair)}
                                title="Sync now"
                                disabled={!pair.enabled}
                            >
                                <RefreshCw size={18} />
                            </button>
                            <button
                                class="p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-macos-red transition-colors"
                                onclick={() => removePair(pair.id)}
                                title="Remove"
                            >
                                <Trash2 size={18} />
                            </button>
                        </div>
                    </div>

                    <div class="flex items-center gap-3 bg-black/20 rounded-lg p-3 mb-3">
                        <div class="flex-1 min-w-0">
                            <span class="block text-xs text-slate-500 mb-1">Local:</span>
                            <span class="block text-sm text-slate-300 font-mono truncate">{pair.localPath}</span>
                        </div>
                        <ArrowLeftRight size={20} class="text-macos-blue flex-shrink-0" />
                        <div class="flex-1 min-w-0">
                            <span class="block text-xs text-slate-500 mb-1">Remote:</span>
                            <span class="block text-sm text-slate-300 font-mono truncate">{pair.remotePath}</span>
                        </div>
                    </div>

                    <div class="text-xs text-slate-500">
                        Last sync: {formatDate(pair.lastSyncTime)}
                    </div>
                </div>
            {/each}
        {/if}
    </div>

    <!-- Preview modal -->
    {#if showPreview}
        <div class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50" onclick={closePreview}>
            <div class="bg-slate-800 border border-white/10 rounded-xl p-6 w-full max-w-lg max-h-[80vh] overflow-y-auto shadow-2xl" onclick={(e) => e.stopPropagation()}>
                <div class="flex justify-between items-center mb-5">
                    <h3 class="text-xl font-semibold">Sync Preview</h3>
                    <button class="text-slate-500 hover:text-slate-300" onclick={closePreview}>
                        <X size={24} />
                    </button>
                </div>

                {#if analyzingPairId}
                    <div class="text-center py-10">
                        <RefreshCw size={40} class="animate-spin text-macos-blue mx-auto mb-4" />
                        <p class="text-slate-400">Analyzing changes...</p>
                    </div>
                {:else if previewData?.error}
                    <div class="text-center py-10 text-macos-red">
                        <AlertCircle size={48} class="mx-auto mb-4" />
                        <p>{previewData.error}</p>
                    </div>
                {:else if previewData}
                    <div class="mb-5 p-4 bg-black/20 rounded-lg">
                        <p class="font-medium mb-2">{previewData.peerName}</p>
                        <div class="flex items-center gap-2 text-xs text-slate-400 font-mono">
                            <span class="truncate max-w-[40%]">{previewData.localPath}</span>
                            <ArrowLeftRight size={14} class="text-macos-blue flex-shrink-0" />
                            <span class="truncate max-w-[40%]">{previewData.remotePath}</span>
                        </div>
                    </div>

                    <div class="flex gap-3 mb-5">
                        <div class="flex-1 p-4 bg-black/20 rounded-lg">
                            <div class="flex items-center gap-3">
                                <ChevronUp size={24} class="text-macos-green" />
                                <div>
                                    <span class="block text-2xl font-semibold">{previewData.pushCount}</span>
                                    <span class="text-xs text-slate-500">Upload</span>
                                    <span class="block text-xs text-slate-400">{formatBytes(previewData.pushSize)}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1 p-4 bg-black/20 rounded-lg">
                            <div class="flex items-center gap-3">
                                <ChevronDown size={24} class="text-macos-blue" />
                                <div>
                                    <span class="block text-2xl font-semibold">{previewData.pullCount}</span>
                                    <span class="text-xs text-slate-500">Download</span>
                                    <span class="block text-xs text-slate-400">{formatBytes(previewData.pullSize)}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {#if previewData.toPush?.length > 0}
                        <div class="mb-4">
                            <h4 class="text-sm text-slate-400 mb-2">Files to Upload ({previewData.pushCount})</h4>
                            <ul class="bg-black/20 rounded-lg max-h-32 overflow-y-auto">
                                {#each previewData.toPush.slice(0, 8) as file}
                                    <li class="px-3 py-2 text-xs font-mono text-macos-green border-b border-white/5 last:border-b-0">{file.path}</li>
                                {/each}
                                {#if previewData.toPush.length > 8}
                                    <li class="px-3 py-2 text-xs text-slate-500 italic">...and {previewData.toPush.length - 8} more</li>
                                {/if}
                            </ul>
                        </div>
                    {/if}

                    {#if previewData.toPull?.length > 0}
                        <div class="mb-4">
                            <h4 class="text-sm text-slate-400 mb-2">Files to Download ({previewData.pullCount})</h4>
                            <ul class="bg-black/20 rounded-lg max-h-32 overflow-y-auto">
                                {#each previewData.toPull.slice(0, 8) as file}
                                    <li class="px-3 py-2 text-xs font-mono text-macos-blue border-b border-white/5 last:border-b-0">{file.path}</li>
                                {/each}
                                {#if previewData.toPull.length > 8}
                                    <li class="px-3 py-2 text-xs text-slate-500 italic">...and {previewData.toPull.length - 8} more</li>
                                {/if}
                            </ul>
                        </div>
                    {/if}

                    {#if previewData.pushCount === 0 && previewData.pullCount === 0}
                        <div class="text-center py-10 text-macos-green">
                            <Check size={48} class="mx-auto mb-4" />
                            <p>Everything is in sync!</p>
                        </div>
                    {/if}
                {/if}

                <div class="flex justify-end gap-3 pt-4 border-t border-white/10">
                    <button
                        class="px-4 py-2 text-sm font-medium text-slate-300 bg-white/10 border border-white/20 rounded-lg hover:bg-white/15 transition-colors"
                        onclick={closePreview}
                    >
                        Cancel
                    </button>
                    {#if previewData && !previewData.error && (previewData.pushCount > 0 || previewData.pullCount > 0)}
                        <button
                            class="px-4 py-2 text-sm font-medium text-white bg-macos-blue rounded-lg hover:bg-blue-600 transition-colors"
                            onclick={syncFromPreview}
                        >
                            Start Sync
                        </button>
                    {/if}
                </div>
            </div>
        </div>
    {/if}
</div>
```

Key migration changes:
- All `let x = value` reactive state becomes `let x = $state(value)`
- `$: pairedPeers = ...` becomes `const pairedPeers = $derived(...)`
- `on:click={fn}` becomes `onclick={fn}`
- `on:click|stopPropagation` becomes `onclick={(e) => e.stopPropagation()}`
- `on:change` becomes `onchange`
- Lucide icons replace all inline SVGs
- All styles are Tailwind classes
  </action>
  <verify>
File frontend/src/lib/FolderPairs.svelte exists with new content.
Contains: "$state(", "$derived", "onclick=", "lucide-svelte".
Does NOT contain: "$:", "on:click=", "<style>".
  </verify>
  <done>
FolderPairs.svelte migrated to Svelte 5 runes.
Uses Lucide icons for all actions.
macOS color tokens for visual feedback.
Preview modal uses backdrop-blur effect.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` succeeds in frontend/
2. PeerList displays devices with Lucide Monitor icon
3. FolderPairs shows folder pairs with sync controls
4. Status colors use macos-green, macos-blue, macos-red
5. No <style> blocks in either component
6. All reactive code uses $state and $derived
</verification>

<success_criteria>
- PeerList.svelte uses Svelte 5 runes
- FolderPairs.svelte uses Svelte 5 runes
- Both use Lucide icons (no inline SVGs)
- macOS color tokens for status indicators
- All Tailwind styling, no <style> blocks
- Search, filter, and actions work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/04-native-macos-ui/04-04-SUMMARY.md`
</output>
